{"ast":null,"code":"import axios from 'axios';\nimport { setUser } from \"../reducers/userReducer\";\nexport const registration = async (login, email, password, setAuth, setErrors, errors) => {\n  try {\n    await axios.post('http://localhost:5000/api/auth/registration', {\n      login,\n      email,\n      password\n    });\n    setAuth(true);\n    setErrors({\n      ...errors,\n      registrationError: ''\n    });\n  } catch (e) {\n    setErrors({\n      ...errors,\n      registrationError: e.response.data.message\n    });\n  }\n};\nexport const authorization = (login, password, setUsername, setErrors, errors) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`http://localhost:5000/api/auth/login`, {\n        login,\n        password\n      });\n      dispatch(setUser(response.data.user));\n      setUsername(response.data.user.email);\n    } catch (e) {\n      if (login === 'google') {\n        dispatch(setUser({\n          email: 'Google'\n        }));\n      }\n      setErrors({\n        ...errors,\n        wrongLogin: e.response.data.message\n      });\n    }\n  };\n};","map":{"version":3,"names":["axios","setUser","registration","login","email","password","setAuth","setErrors","errors","post","registrationError","e","response","data","message","authorization","setUsername","dispatch","user","wrongLogin"],"sources":["C:/Users/Хобана/WebstormProjects/registration-spa/src/actions/user.js"],"sourcesContent":["import axios from 'axios';\r\nimport {setUser} from \"../reducers/userReducer\";\r\nexport const registration = async(login, email, password, setAuth, setErrors, errors)=>{\r\n    try {\r\n        await axios.post('http://localhost:5000/api/auth/registration', {\r\n                login,\r\n                email,\r\n                password\r\n            }\r\n        )\r\n        setAuth(true);\r\n        setErrors({\r\n            ...errors,\r\n            registrationError: ''\r\n        })\r\n    }\r\n    catch(e){\r\n        setErrors({\r\n            ...errors,\r\n            registrationError: e.response.data.message\r\n        })\r\n    }\r\n}\r\nexport const authorization = (login, password, setUsername, setErrors, errors)=>{\r\n    return async dispatch =>{\r\n        try {\r\n            const response = await axios.post(`http://localhost:5000/api/auth/login`, {\r\n                    login,\r\n                    password\r\n                }\r\n            )\r\n            dispatch(setUser(response.data.user));\r\n            setUsername(response.data.user.email);\r\n        }\r\n        catch(e){\r\n            if(login==='google'){dispatch(setUser({email: 'Google'}))}\r\n            setErrors({\r\n                ...errors,\r\n                wrongLogin: e.response.data.message\r\n            })\r\n        }\r\n    }\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,OAAO,QAAO,yBAAyB;AAC/C,OAAO,MAAMC,YAAY,GAAG,OAAMC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,SAAS,EAAEC,MAAM,KAAG;EACnF,IAAI;IACA,MAAMR,KAAK,CAACS,IAAI,CAAC,6CAA6C,EAAE;MACxDN,KAAK;MACLC,KAAK;MACLC;IACJ,CAAC,CACJ;IACDC,OAAO,CAAC,IAAI,CAAC;IACbC,SAAS,CAAC;MACN,GAAGC,MAAM;MACTE,iBAAiB,EAAE;IACvB,CAAC,CAAC;EACN,CAAC,CACD,OAAMC,CAAC,EAAC;IACJJ,SAAS,CAAC;MACN,GAAGC,MAAM;MACTE,iBAAiB,EAAEC,CAAC,CAACC,QAAQ,CAACC,IAAI,CAACC;IACvC,CAAC,CAAC;EACN;AACJ,CAAC;AACD,OAAO,MAAMC,aAAa,GAAG,CAACZ,KAAK,EAAEE,QAAQ,EAAEW,WAAW,EAAET,SAAS,EAAEC,MAAM,KAAG;EAC5E,OAAO,MAAMS,QAAQ,IAAG;IACpB,IAAI;MACA,MAAML,QAAQ,GAAG,MAAMZ,KAAK,CAACS,IAAI,CAAE,sCAAqC,EAAE;QAClEN,KAAK;QACLE;MACJ,CAAC,CACJ;MACDY,QAAQ,CAAChB,OAAO,CAACW,QAAQ,CAACC,IAAI,CAACK,IAAI,CAAC,CAAC;MACrCF,WAAW,CAACJ,QAAQ,CAACC,IAAI,CAACK,IAAI,CAACd,KAAK,CAAC;IACzC,CAAC,CACD,OAAMO,CAAC,EAAC;MACJ,IAAGR,KAAK,KAAG,QAAQ,EAAC;QAACc,QAAQ,CAAChB,OAAO,CAAC;UAACG,KAAK,EAAE;QAAQ,CAAC,CAAC,CAAC;MAAA;MACzDG,SAAS,CAAC;QACN,GAAGC,MAAM;QACTW,UAAU,EAAER,CAAC,CAACC,QAAQ,CAACC,IAAI,CAACC;MAChC,CAAC,CAAC;IACN;EACJ,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}